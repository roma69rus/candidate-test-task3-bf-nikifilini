{"ast":null,"code":"import _regeneratorRuntime from\"C:/prj/candidate-test-task3-nikifilini/test-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/prj/candidate-test-task3-nikifilini/test-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/prj/candidate-test-task3-nikifilini/test-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/prj/candidate-test-task3-nikifilini/test-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import{makeAutoObservable}from\"mobx\";import{createBrowserHistory}from\"history\";var OrdersListState=/*#__PURE__*/function(){function OrdersListState(){_classCallCheck(this,OrdersListState);this.initialized=false;this.loading=false;this.page=1;this.totalPages=1;this.orders=[];this.history=void 0;makeAutoObservable(this);this.history=createBrowserHistory();}_createClass(OrdersListState,[{key:\"setInitialized\",value:function setInitialized(val){this.initialized=val;}},{key:\"setOrders\",value:function setOrders(orders){this.orders=orders;}},{key:\"startLoading\",value:function startLoading(){this.loading=true;}},{key:\"stopLoading\",value:function stopLoading(){this.loading=false;}},{key:\"setPage\",value:function setPage(page){this.page=page;var url=new URL(window.location.href);if(url.searchParams.get(\"page\")!==this.page.toString()){url.searchParams.set(\"page\",\"\"+this.page);this.history.replace(url.pathname+url.search,{});}}},{key:\"nextPage\",value:function nextPage(){if(this.page>=this.totalPages)return;this.setPage(this.page+1);this.loading=true;this.loadOrders();}},{key:\"prevPage\",value:function prevPage(){if(this.page<=1)return;this.setPage(this.page-1);this.loading=true;this.loadOrders();}},{key:\"setTotalPages\",value:function setTotalPages(totalPages){this.totalPages=totalPages;}},{key:\"canNext\",get:function get(){return this.page<this.totalPages;}},{key:\"canPrev\",get:function get(){return this.page>1;}},{key:\"loadOrders\",value:function(){var _loadOrders=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.loading=true;this.loading=false;case 2:case\"end\":return _context.stop();}}},_callee,this);}));function loadOrders(){return _loadOrders.apply(this,arguments);}return loadOrders;}()},{key:\"initialize\",value:function initialize(){if(this.initialized)return;this.initialized=true;this.loadOrders();}}]);return OrdersListState;}();export{OrdersListState as default};","map":{"version":3,"sources":["C:/prj/candidate-test-task3-nikifilini/test-frontend/src/screens/Orders/List/store.ts"],"names":["makeAutoObservable","createBrowserHistory","OrdersListState","initialized","loading","page","totalPages","orders","history","val","url","URL","window","location","href","searchParams","get","toString","set","replace","pathname","search","setPage","loadOrders"],"mappings":"uqBAAA,OAASA,kBAAT,KAAmC,MAAnC,CAEA,OAASC,oBAAT,KAA8C,SAA9C,C,GAIqBC,CAAAA,e,yBAYnB,0BAAc,4CAXdC,WAWc,CAXA,KAWA,MAVdC,OAUc,CAVJ,KAUI,MATdC,IASc,CATP,CASO,MARdC,UAQc,CARD,CAQC,MAPdC,MAOc,CAPa,EAOb,MANdC,OAMc,QACZR,kBAAkB,CAAC,IAAD,CAAlB,CACA,KAAKQ,OAAL,CAAeP,oBAAoB,EAAnC,CACD,C,0DAPD,wBAAeQ,GAAf,CAA6B,CAC3B,KAAKN,WAAL,CAAmBM,GAAnB,CACD,C,yBAOD,mBAAUF,MAAV,CAA0C,CACxC,KAAKA,MAAL,CAAcA,MAAd,CACD,C,4BAED,uBAAqB,CACnB,KAAKH,OAAL,CAAe,IAAf,CACD,C,2BAED,sBAAoB,CAClB,KAAKA,OAAL,CAAe,KAAf,CACD,C,uBAED,iBAAQC,IAAR,CAA4B,CAC1B,KAAKA,IAAL,CAAYA,IAAZ,CACA,GAAMK,CAAAA,GAAG,CAAG,GAAIC,CAAAA,GAAJ,CAAQC,MAAM,CAACC,QAAP,CAAgBC,IAAxB,CAAZ,CACA,GAAIJ,GAAG,CAACK,YAAJ,CAAiBC,GAAjB,CAAqB,MAArB,IAAiC,KAAKX,IAAL,CAAUY,QAAV,EAArC,CAA2D,CACzDP,GAAG,CAACK,YAAJ,CAAiBG,GAAjB,CAAqB,MAArB,CAA6B,GAAK,KAAKb,IAAvC,EACA,KAAKG,OAAL,CAAaW,OAAb,CAAqBT,GAAG,CAACU,QAAJ,CAAeV,GAAG,CAACW,MAAxC,CAAgD,EAAhD,EACD,CACF,C,wBAED,mBAAiB,CACf,GAAI,KAAKhB,IAAL,EAAa,KAAKC,UAAtB,CAAkC,OAClC,KAAKgB,OAAL,CAAa,KAAKjB,IAAL,CAAY,CAAzB,EACA,KAAKD,OAAL,CAAe,IAAf,CACA,KAAKmB,UAAL,GACD,C,wBAED,mBAAiB,CACf,GAAI,KAAKlB,IAAL,EAAa,CAAjB,CAAoB,OACpB,KAAKiB,OAAL,CAAa,KAAKjB,IAAL,CAAY,CAAzB,EACA,KAAKD,OAAL,CAAe,IAAf,CACA,KAAKmB,UAAL,GACD,C,6BAED,uBAAcjB,UAAd,CAAwC,CACtC,KAAKA,UAAL,CAAkBA,UAAlB,CACD,C,qBAED,cAAuB,CACrB,MAAO,MAAKD,IAAL,CAAY,KAAKC,UAAxB,CACD,C,qBAED,cAAuB,CACrB,MAAO,MAAKD,IAAL,CAAY,CAAnB,CACD,C,6GAED,mIACE,KAAKD,OAAL,CAAe,IAAf,CACA,KAAKA,OAAL,CAAe,KAAf,CAFF,2D,kHAKA,qBAAa,CACX,GAAI,KAAKD,WAAT,CAAsB,OACtB,KAAKA,WAAL,CAAmB,IAAnB,CACA,KAAKoB,UAAL,GACD,C,sCAzEkBrB,e","sourcesContent":["import { makeAutoObservable } from \"mobx\";\r\nimport { OrdersListItem } from \"./types\";\r\nimport { createBrowserHistory, History } from \"history\";\r\nimport client from \"api/gql\";\r\nimport { GET_ORDERS_QUERY } from \"~/screens/Orders/List/queries\";\r\n\r\nexport default class OrdersListState {\r\n  initialized = false;\r\n  loading = false;\r\n  page = 1;\r\n  totalPages = 1;\r\n  orders: OrdersListItem[] = [];\r\n  history: History;\r\n\r\n  setInitialized(val: boolean) {\r\n    this.initialized = val;\r\n  }\r\n\r\n  constructor() {\r\n    makeAutoObservable(this);\r\n    this.history = createBrowserHistory();\r\n  }\r\n\r\n  setOrders(orders: OrdersListItem[]): void {\r\n    this.orders = orders;\r\n  }\r\n\r\n  startLoading(): void {\r\n    this.loading = true;\r\n  }\r\n\r\n  stopLoading(): void {\r\n    this.loading = false;\r\n  }\r\n\r\n  setPage(page: number): void {\r\n    this.page = page;\r\n    const url = new URL(window.location.href);\r\n    if (url.searchParams.get(\"page\") !== this.page.toString()) {\r\n      url.searchParams.set(\"page\", \"\" + this.page);\r\n      this.history.replace(url.pathname + url.search, {});\r\n    }\r\n  }\r\n\r\n  nextPage(): void {\r\n    if (this.page >= this.totalPages) return;\r\n    this.setPage(this.page + 1);\r\n    this.loading = true;\r\n    this.loadOrders();\r\n  }\r\n\r\n  prevPage(): void {\r\n    if (this.page <= 1) return;\r\n    this.setPage(this.page - 1);\r\n    this.loading = true;\r\n    this.loadOrders();\r\n  }\r\n\r\n  setTotalPages(totalPages: number): void {\r\n    this.totalPages = totalPages;\r\n  }\r\n\r\n  get canNext(): boolean {\r\n    return this.page < this.totalPages;\r\n  }\r\n\r\n  get canPrev(): boolean {\r\n    return this.page > 1;\r\n  }\r\n\r\n  async loadOrders() {\r\n    this.loading = true;\r\n    this.loading = false;\r\n  }\r\n\r\n  initialize() {\r\n    if (this.initialized) return;\r\n    this.initialized = true;\r\n    this.loadOrders();\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
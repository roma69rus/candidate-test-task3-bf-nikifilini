"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.funcLabel = exports.RichError = void 0;
const secret = Symbol('secret');
class RichError extends Error {
    constructor(details) {
        super(JSON.stringify(details, null, 2));
        this.details = details;
    }
    static thrower(context) {
        return (info) => RichError.throw({ context, details: info });
    }
    static throw(details) {
        const resolvedDetails = details || { details: 'none!' };
        throw Object.assign(new RichError(resolvedDetails), { details: resolvedDetails });
    }
}
exports.RichError = RichError;
exports.funcLabel = (func) => func.name ||
    func
        .toString()
        .split('\n')
        .filter((_, i, arr) => i === 0 || i === arr.length - 1)
        .map(line => line.trim())
        .join(' ... ');
//# sourceMappingURL=util.js.map